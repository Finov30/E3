# Résultats des Tests API

## Test du 2025-02-26 19:21:55

### POST /auth/login
Status: 200
Succès: ✅

#### Détails de la Requête
```json
{
  "url": "http://localhost:8000/auth/login",
  "method": "POST",
  "headers": null,
  "data": {
    "username": "admin",
    "password": "prodPassword"
  },
  "files": null
}
```

#### Réponse
```json
{
  "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbiIsInJvbGUiOiJhZG1pbiIsImV4cCI6MTc0MDY4NDExNH0.1xnSLJQ-xNijjBa0Sc5Yo7qJ7xslF8xIrjymJaQGyNU",
  "token_type": "bearer"
}
```

---

### POST /predict
Status: 200
Succès: ✅

#### Détails de la Requête
```json
{
  "url": "http://localhost:8000/predict",
  "method": "POST",
  "headers": {
    "Authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbiIsInJvbGUiOiJhZG1pbiIsImV4cCI6MTc0MDY4NDExNH0.1xnSLJQ-xNijjBa0Sc5Yo7qJ7xslF8xIrjymJaQGyNU"
  },
  "data": {
    "image_path": "/app/api-test-endpoint/images-test.jpg"
  },
  "files": {
    "filename": "/app/api-test-endpoint/images-test.jpg"
  }
}
```

#### Réponse
```json
{
  "prediction_id": "images-test.jpg_spaghetti_bolognese_20250226_192155_268ae2e8",
  "filename": "images-test.jpg",
  "predicted_class": "spaghetti_bolognese",
  "confidence": 99.08921718597412,
  "top5_predictions": [
    {
      "classe": "spaghetti_bolognese",
      "confiance": 99.08921718597412
    },
    {
      "classe": "spaghetti_carbonara",
      "confiance": 0.8749638684093952
    },
    {
      "classe": "pad_thai",
      "confiance": 0.01584982092026621
    },
    {
      "classe": "ramen",
      "confiance": 0.00863526583998464
    },
    {
      "classe": "pho",
      "confiance": 0.001290609816351207
    }
  ]
}
```

---

### POST /predict_batch
Status: 200
Succès: ✅

#### Détails de la Requête
```json
{
  "url": "http://localhost:8000/predict_batch",
  "method": "POST",
  "headers": {
    "Authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbiIsInJvbGUiOiJhZG1pbiIsImV4cCI6MTc0MDY4NDExNH0.1xnSLJQ-xNijjBa0Sc5Yo7qJ7xslF8xIrjymJaQGyNU"
  },
  "data": {
    "images": [
      "/app/api-test-endpoint/multi-image-test.jpg",
      "/app/api-test-endpoint/multi-image-test-2.jpg"
    ]
  },
  "files": [
    {
      "filename": "/app/api-test-endpoint/multi-image-test.jpg"
    },
    {
      "filename": "/app/api-test-endpoint/multi-image-test-2.jpg"
    }
  ]
}
```

#### Réponse
```json
{
  "total_images": 2,
  "successful_predictions": 2,
  "failed_predictions": 0,
  "results": [
    {
      "prediction_id": "multi-image-test.jpg_beignets_20250226_192155_28ec1c84",
      "filename": "multi-image-test.jpg",
      "predicted_class": "beignets",
      "confidence": 16.131913661956787,
      "top5_predictions": [
        {
          "classe": "beignets",
          "confiance": 16.131913661956787
        },
        {
          "classe": "donuts",
          "confiance": 13.179731369018555
        },
        {
          "classe": "cannoli",
          "confiance": 9.697908908128738
        },
        {
          "classe": "macarons",
          "confiance": 5.533520504832268
        },
        {
          "classe": "cheesecake",
          "confiance": 5.000825971364975
        }
      ],
      "status": "success"
    },
    {
      "prediction_id": "multi-image-test-2.jpg_steak_20250226_192155_541d90af",
      "filename": "multi-image-test-2.jpg",
      "predicted_class": "steak",
      "confidence": 52.13765501976013,
      "top5_predictions": [
        {
          "classe": "steak",
          "confiance": 52.13765501976013
        },
        {
          "classe": "prime_rib",
          "confiance": 25.21904706954956
        },
        {
          "classe": "filet_mignon",
          "confiance": 13.362956047058105
        },
        {
          "classe": "baby_back_ribs",
          "confiance": 3.2032087445259094
        },
        {
          "classe": "pork_chop",
          "confiance": 1.3844632543623447
        }
      ],
      "status": "success"
    }
  ]
}
```

---

### POST /predict_zip
Status: 200
Succès: ✅

#### Détails de la Requête
```json
{
  "url": "http://localhost:8000/predict_zip",
  "method": "POST",
  "headers": {
    "Authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbiIsInJvbGUiOiJhZG1pbiIsImV4cCI6MTc0MDY4NDExNH0.1xnSLJQ-xNijjBa0Sc5Yo7qJ7xslF8xIrjymJaQGyNU"
  },
  "data": {
    "zip_file": "/app/api-test-endpoint/zip-test.zip"
  },
  "files": {
    "filename": "/app/api-test-endpoint/zip-test.zip"
  }
}
```

#### Réponse
```json
{
  "zip_filename": "zip-test.zip",
  "total_images": 2,
  "successful_predictions": 2,
  "failed_predictions": 0,
  "results": [
    {
      "prediction_id": "images.jpg_spaghetti_bolognese_20250226_192155_99634f82",
      "filename": "images.jpg",
      "predicted_class": "spaghetti_bolognese",
      "confidence": 99.08921718597412,
      "top5_predictions": [
        {
          "classe": "spaghetti_bolognese",
          "confiance": 99.08921718597412
        },
        {
          "classe": "spaghetti_carbonara",
          "confiance": 0.8749638684093952
        },
        {
          "classe": "pad_thai",
          "confiance": 0.01584982092026621
        },
        {
          "classe": "ramen",
          "confiance": 0.00863526583998464
        },
        {
          "classe": "pho",
          "confiance": 0.001290609816351207
        }
      ],
      "status": "success"
    },
    {
      "prediction_id": "photo_126.jpg_spaghetti_bolognese_20250226_192155_194d4c85",
      "filename": "photo_126.jpg",
      "predicted_class": "spaghetti_bolognese",
      "confidence": 29.25831377506256,
      "top5_predictions": [
        {
          "classe": "spaghetti_bolognese",
          "confiance": 29.25831377506256
        },
        {
          "classe": "chocolate_cake",
          "confiance": 17.07318276166916
        },
        {
          "classe": "beef_tartare",
          "confiance": 16.856010258197784
        },
        {
          "classe": "red_velvet_cake",
          "confiance": 12.829248607158661
        },
        {
          "classe": "cup_cakes",
          "confiance": 4.7975074499845505
        }
      ],
      "status": "success"
    }
  ]
}
```

---

### POST /feedback
Status: 200
Succès: ✅

#### Détails de la Requête
```json
{
  "url": "http://localhost:8000/feedback",
  "method": "POST",
  "headers": {
    "Authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbiIsInJvbGUiOiJhZG1pbiIsImV4cCI6MTc0MDY4NDExNH0.1xnSLJQ-xNijjBa0Sc5Yo7qJ7xslF8xIrjymJaQGyNU"
  },
  "data": {
    "prediction_id": "images-test.jpg_spaghetti_bolognese_20250226_192155_268ae2e8",
    "is_correct": true,
    "correct_class": "spaghetti_bolognese"
  },
  "files": null
}
```

#### Réponse
```json
{
  "status": "\u2705 Feedback enregistr\u00e9 (en attente d'entra\u00eenement)",
  "prediction_id": "images-test.jpg_spaghetti_bolognese_20250226_192155_268ae2e8",
  "is_correct": true,
  "used_class": "spaghetti_bolognese",
  "feedback_count": 1,
  "valid_feedback_count": 1
}
```

---

