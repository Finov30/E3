# Résultats des Tests API

## Test du 2025-02-23 10:54:44

### POST /auth/login
Status: 200
Succès: ✅

#### Détails de la Requête
```json
{
  "url": "http://localhost:8000/auth/login",
  "method": "POST",
  "headers": null,
  "data": {
    "username": "admin",
    "password": "prodPassword"
  },
  "files": null
}
```

#### Réponse
```json
{
  "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbiIsInJvbGUiOiJhZG1pbiIsImV4cCI6MTc0MDM5NDQ4M30.ubTjhivqIuEPg1Z53MHhnDfXujg5OOv6l4yKhcKQ-Q8",
  "token_type": "bearer"
}
```

---

### POST /predict
Status: 200
Succès: ✅

#### Détails de la Requête
```json
{
  "url": "http://localhost:8000/predict",
  "method": "POST",
  "headers": {
    "Authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbiIsInJvbGUiOiJhZG1pbiIsImV4cCI6MTc0MDM5NDQ4M30.ubTjhivqIuEPg1Z53MHhnDfXujg5OOv6l4yKhcKQ-Q8"
  },
  "data": {
    "image_path": "/app/api-test-endpoint/images-test.jpg"
  },
  "files": {
    "filename": "/app/api-test-endpoint/images-test.jpg"
  }
}
```

#### Réponse
```json
{
  "prediction_id": "images-test.jpg_spaghetti_bolognese_20250223_105444_b93f6f13",
  "filename": "images-test.jpg",
  "predicted_class": "spaghetti_bolognese",
  "confidence": 87.35452890396118,
  "top5_predictions": [
    {
      "classe": "spaghetti_bolognese",
      "confiance": 87.35452890396118
    },
    {
      "classe": "spaghetti_carbonara",
      "confiance": 12.382111698389053
    },
    {
      "classe": "ramen",
      "confiance": 0.116376590449363
    },
    {
      "classe": "pad_thai",
      "confiance": 0.09245003457181156
    },
    {
      "classe": "pho",
      "confiance": 0.006904461042722687
    }
  ]
}
```

---

### POST /predict_batch
Status: 200
Succès: ✅

#### Détails de la Requête
```json
{
  "url": "http://localhost:8000/predict_batch",
  "method": "POST",
  "headers": {
    "Authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbiIsInJvbGUiOiJhZG1pbiIsImV4cCI6MTc0MDM5NDQ4M30.ubTjhivqIuEPg1Z53MHhnDfXujg5OOv6l4yKhcKQ-Q8"
  },
  "data": {
    "images": [
      "/app/api-test-endpoint/multi-image-test.jpg",
      "/app/api-test-endpoint/multi-image-test-2.jpg"
    ]
  },
  "files": [
    {
      "filename": "/app/api-test-endpoint/multi-image-test.jpg"
    },
    {
      "filename": "/app/api-test-endpoint/multi-image-test-2.jpg"
    }
  ]
}
```

#### Réponse
```json
{
  "total_images": 2,
  "successful_predictions": 2,
  "failed_predictions": 0,
  "results": [
    {
      "prediction_id": "multi-image-test.jpg_pancakes_20250223_105444_6b0ccc35",
      "filename": "multi-image-test.jpg",
      "predicted_class": "pancakes",
      "confidence": 23.68531972169876,
      "top5_predictions": [
        {
          "classe": "pancakes",
          "confiance": 23.68531972169876
        },
        {
          "classe": "apple_pie",
          "confiance": 8.277808874845505
        },
        {
          "classe": "hot_dog",
          "confiance": 7.673655450344086
        },
        {
          "classe": "grilled_cheese_sandwich",
          "confiance": 7.611742615699768
        },
        {
          "classe": "donuts",
          "confiance": 6.859657168388367
        }
      ],
      "status": "success"
    },
    {
      "prediction_id": "multi-image-test-2.jpg_steak_20250223_105444_8fb1d063",
      "filename": "multi-image-test-2.jpg",
      "predicted_class": "steak",
      "confidence": 45.39255201816559,
      "top5_predictions": [
        {
          "classe": "steak",
          "confiance": 45.39255201816559
        },
        {
          "classe": "prime_rib",
          "confiance": 40.292349457740784
        },
        {
          "classe": "filet_mignon",
          "confiance": 11.211372166872025
        },
        {
          "classe": "baby_back_ribs",
          "confiance": 1.3877918012440205
        },
        {
          "classe": "pork_chop",
          "confiance": 1.0983274318277836
        }
      ],
      "status": "success"
    }
  ]
}
```

---

### POST /predict_zip
Status: 200
Succès: ✅

#### Détails de la Requête
```json
{
  "url": "http://localhost:8000/predict_zip",
  "method": "POST",
  "headers": {
    "Authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbiIsInJvbGUiOiJhZG1pbiIsImV4cCI6MTc0MDM5NDQ4M30.ubTjhivqIuEPg1Z53MHhnDfXujg5OOv6l4yKhcKQ-Q8"
  },
  "data": {
    "zip_file": "/app/api-test-endpoint/zip-test.zip"
  },
  "files": {
    "filename": "/app/api-test-endpoint/zip-test.zip"
  }
}
```

#### Réponse
```json
{
  "zip_filename": "zip-test.zip",
  "total_images": 2,
  "successful_predictions": 2,
  "failed_predictions": 0,
  "results": [
    {
      "prediction_id": "images.jpg_spaghetti_bolognese_20250223_105444_884da9e2",
      "filename": "images.jpg",
      "predicted_class": "spaghetti_bolognese",
      "confidence": 87.35452890396118,
      "top5_predictions": [
        {
          "classe": "spaghetti_bolognese",
          "confiance": 87.35452890396118
        },
        {
          "classe": "spaghetti_carbonara",
          "confiance": 12.382111698389053
        },
        {
          "classe": "ramen",
          "confiance": 0.116376590449363
        },
        {
          "classe": "pad_thai",
          "confiance": 0.09245003457181156
        },
        {
          "classe": "pho",
          "confiance": 0.006904461042722687
        }
      ],
      "status": "success"
    },
    {
      "prediction_id": "photo_126.jpg_beef_tartare_20250223_105444_97bbfde7",
      "filename": "photo_126.jpg",
      "predicted_class": "beef_tartare",
      "confidence": 97.19690680503845,
      "top5_predictions": [
        {
          "classe": "beef_tartare",
          "confiance": 97.19690680503845
        },
        {
          "classe": "spaghetti_bolognese",
          "confiance": 1.6985230147838593
        },
        {
          "classe": "red_velvet_cake",
          "confiance": 0.2659958554431796
        },
        {
          "classe": "tuna_tartare",
          "confiance": 0.1940375310368836
        },
        {
          "classe": "macarons",
          "confiance": 0.0695251626893878
        }
      ],
      "status": "success"
    }
  ]
}
```

---

### POST /feedback
Status: 400
Succès: ❌

#### Détails de la Requête
```json
{
  "url": "http://localhost:8000/feedback",
  "method": "POST",
  "headers": {
    "Authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbiIsInJvbGUiOiJhZG1pbiIsImV4cCI6MTc0MDM5NDQ4M30.ubTjhivqIuEPg1Z53MHhnDfXujg5OOv6l4yKhcKQ-Q8"
  },
  "data": {
    "prediction_id": "images-test.jpg_spaghetti_bolognese_20250223_105444_b93f6f13",
    "is_correct": true,
    "correct_class": "spaghetti_bolognese"
  },
  "files": null
}
```

#### Réponse
```json
{
  "detail": "Classe non valide: 'spaghetti' is not in list"
}
```

---

