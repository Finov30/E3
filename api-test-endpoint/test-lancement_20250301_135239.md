# Résultats des Tests API

## Test du 2025-03-01 13:52:39

### POST /auth/login
Status: 200
Succès: ✅

#### Détails de la Requête
```json
{
  "url": "http://localhost:8000/auth/login",
  "method": "POST",
  "headers": null,
  "data": {
    "username": "admin",
    "password": "prodPassword"
  },
  "files": null
}
```

#### Réponse
```json
{
  "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbiIsInJvbGUiOiJhZG1pbiIsImV4cCI6MTc0MDkyMzU1OH0.XTrpblMBfh8szapS51VkXgZWau8v_rEqY1Nb5jh2llw",
  "token_type": "bearer"
}
```

---

### POST /predict
Status: 200
Succès: ✅

#### Détails de la Requête
```json
{
  "url": "http://localhost:8000/predict",
  "method": "POST",
  "headers": {
    "Authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbiIsInJvbGUiOiJhZG1pbiIsImV4cCI6MTc0MDkyMzU1OH0.XTrpblMBfh8szapS51VkXgZWau8v_rEqY1Nb5jh2llw"
  },
  "data": {
    "image_path": "/app/api-test-endpoint/images-test.jpg"
  },
  "files": {
    "filename": "/app/api-test-endpoint/images-test.jpg"
  }
}
```

#### Réponse
```json
{
  "filename": "images-test.jpg",
  "predicted_class": "spaghetti_bolognese",
  "confidence": 99.99854564666748,
  "top5_predictions": [
    {
      "classe": "spaghetti_bolognese",
      "confiance": 99.99854564666748
    },
    {
      "classe": "spaghetti_carbonara",
      "confiance": 0.0005217697889747797
    },
    {
      "classe": "pad_thai",
      "confiance": 0.00037577474358840846
    },
    {
      "classe": "breakfast_burrito",
      "confiance": 0.0001130117539105413
    },
    {
      "classe": "chicken_curry",
      "confiance": 9.053960070559697e-05
    }
  ],
  "prediction_id": "images-test.jpg_spaghetti_bolognese_20250301_1352_8e92f534"
}
```

---

### POST /predict_batch
Status: 200
Succès: ✅

#### Détails de la Requête
```json
{
  "url": "http://localhost:8000/predict_batch",
  "method": "POST",
  "headers": {
    "Authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbiIsInJvbGUiOiJhZG1pbiIsImV4cCI6MTc0MDkyMzU1OH0.XTrpblMBfh8szapS51VkXgZWau8v_rEqY1Nb5jh2llw"
  },
  "data": {
    "images": [
      "/app/api-test-endpoint/multi-image-test.jpg",
      "/app/api-test-endpoint/multi-image-test-2.jpg"
    ]
  },
  "files": [
    {
      "filename": "/app/api-test-endpoint/multi-image-test.jpg"
    },
    {
      "filename": "/app/api-test-endpoint/multi-image-test-2.jpg"
    }
  ]
}
```

#### Réponse
```json
{
  "total_images": 2,
  "successful_predictions": 2,
  "failed_predictions": 0,
  "results": [
    {
      "filename": "multi-image-test.jpg",
      "prediction_id": "multi-image-test.jpg_cannoli_20250301_135238_e536fd22",
      "predicted_class": "cannoli",
      "confidence": 22.306013107299805,
      "top5_predictions": [
        {
          "classe": "cannoli",
          "confiance": 22.306013107299805
        },
        {
          "classe": "chocolate_cake",
          "confiance": 9.111738204956055
        },
        {
          "classe": "waffles",
          "confiance": 6.810551136732101
        },
        {
          "classe": "pancakes",
          "confiance": 6.61545991897583
        },
        {
          "classe": "cheesecake",
          "confiance": 5.511723086237907
        }
      ],
      "status": "success"
    },
    {
      "filename": "multi-image-test-2.jpg",
      "prediction_id": "multi-image-test-2.jpg_prime_rib_20250301_135238_d5cc053d",
      "predicted_class": "prime_rib",
      "confidence": 44.62303817272186,
      "top5_predictions": [
        {
          "classe": "prime_rib",
          "confiance": 44.62303817272186
        },
        {
          "classe": "steak",
          "confiance": 40.35121202468872
        },
        {
          "classe": "filet_mignon",
          "confiance": 11.02999746799469
        },
        {
          "classe": "baby_back_ribs",
          "confiance": 1.374554354697466
        },
        {
          "classe": "chocolate_cake",
          "confiance": 0.7862917147576809
        }
      ],
      "status": "success"
    }
  ]
}
```

---

### POST /predict_zip
Status: 422
Succès: ❌

#### Détails de la Requête
```json
{
  "url": "http://localhost:8000/predict_zip",
  "method": "POST",
  "headers": {
    "Authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbiIsInJvbGUiOiJhZG1pbiIsImV4cCI6MTc0MDkyMzU1OH0.XTrpblMBfh8szapS51VkXgZWau8v_rEqY1Nb5jh2llw"
  },
  "data": {
    "zip_file": "/app/api-test-endpoint/zip-test.zip"
  },
  "files": {
    "filename": "/app/api-test-endpoint/zip-test.zip"
  }
}
```

#### Réponse
```json
{
  "detail": [
    {
      "type": "missing",
      "loc": [
        "body",
        "file"
      ],
      "msg": "Field required",
      "input": null,
      "url": "https://errors.pydantic.dev/2.9/v/missing"
    }
  ]
}
```

---

### POST /feedback
Status: 200
Succès: ✅

#### Détails de la Requête
```json
{
  "url": "http://localhost:8000/feedback",
  "method": "POST",
  "headers": {
    "Authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbiIsInJvbGUiOiJhZG1pbiIsImV4cCI6MTc0MDkyMzU1OH0.XTrpblMBfh8szapS51VkXgZWau8v_rEqY1Nb5jh2llw"
  },
  "data": {
    "prediction_id": "images-test.jpg_spaghetti_bolognese_20250301_1352_8e92f534",
    "is_correct": true,
    "correct_class": "spaghetti_bolognese"
  },
  "files": null
}
```

#### Réponse
```json
{
  "status": "success",
  "message": "Feedback enregistr\u00e9"
}
```

---

